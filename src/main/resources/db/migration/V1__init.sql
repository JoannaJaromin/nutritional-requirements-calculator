create schema if not exists calculator;

create table if not exists calculator.users
(
    id        serial primary key,
    username  varchar(20) not null,
    password  varchar(20) not null,
    authority varchar(10) default 'USER'
);

create table if not exists calculator.users_details
(
    user_id       integer primary key references calculator.users (id),
    email         varchar(30) not null,
    sex           varchar(1)  not null,
    date_of_birth date        not null
);

create table if not exists calculator.measurements
(
    id               serial primary key,
    user_id          integer references calculator.users (id),
    measurement_date date    not null,
    height           integer not null,
    weight           integer not null,
    hips             integer,
    belly            integer,
    waist            integer,
    pal              float,
    pregnant         boolean,
    breastfeeding    boolean
);

create table if not exists calculator.requirements
(
    id         serial primary key,
    protein    float,
    fiber      float,
    calcium    float,
    phosphorus float,
    magnesium  float,
    iron       float,
    potassium  float,
    sodium     float,
    zinc       float,
    copper     float,
    iodine     float,
    selenium   float,
    manganese  float,
    vit_c      float,
    vit_b1     float,
    vit_b2     float,
    vit_b3     float,
    vit_b6     float,
    foliate    float,
    vit_b12    float,
    vit_a      float,
    vit_e      float,
    vit_d      float,
    vit_k      float
);

truncate calculator.requirements cascade;
insert into calculator.requirements(id, protein, fiber, calcium, phosphorus, magnesium,
                                    iron, potassium, sodium, zinc, copper, iodine, selenium, manganese, vit_c, vit_b1,
                                    vit_b2, vit_b3, vit_b6, foliate, vit_b12, vit_a, vit_e, vit_d, vit_k)
values (1, 1.52, 0, 200, 150, 30, 0.3, 400, 120, 2, 0.2, 110, 15, 0.003, 20, 0.2, 0.3, 2, 0.1, 65, 0.4, 350, 4, 10, 5),
       (2, 1.6, 10, 260, 300, 70, 11, 750, 370, 3, 0.3, 130, 20, 0.6, 20, 0.3, 0.4, 5, 0.4, 80, 0.5, 350, 5, 10, 8.5),
       (3, 1.17, 10, 700, 460, 80, 7, 800, 750, 3, 0.3, 90, 20, 1.2, 40, 0.5, 0.5, 6, 0.5, 150, 0.9, 400, 6, 15, 15),
       (4, 1.1, 14, 1000, 500, 130, 10, 1100, 1000, 5, 0.4, 90, 30, 1.5, 50, 0.6, 0.6, 8, 0.6, 200, 1.2, 450, 6, 15,
        20),
       (5, 1.1, 16, 1000, 600, 130, 10, 1800, 1200, 5, 0.7, 100, 30, 1.5, 50, 0.9, 0.9, 12, 1, 300, 1.8, 500, 7, 15,
        25),
       (6, 1.1, 19, 1300, 1250, 240, 10, 2400, 1300, 8, 0.7, 120, 40, 1.9, 50, 1, 1, 12, 1.2, 250, 1.8, 600, 10, 15,
        40),
       (7, 1.1, 19, 1300, 1250, 410, 12, 3000, 1500, 11, 0.9, 150, 55, 2.2, 75, 1.2, 1.3, 16, 1.3, 330, 2.4, 900, 10,
        15, 50),
       (8, 0.95, 21, 1300, 1250, 410, 12, 3500, 1500, 11, 0.9, 150, 55, 2.2, 75, 1.2, 1.3, 16, 1.3, 330, 2.4, 900, 10,
        15, 65),
       (9, 0.9, 25, 1000, 700, 400, 10, 3500, 1500, 11, 0.9, 150, 55, 2.3, 90, 1.3, 1.3, 16, 1.3, 400, 2.4, 900, 10, 15,
        65),
       (10, 0.9, 25, 1000, 700, 420, 10, 3500, 1500, 11, 0.9, 150, 55, 2.3, 90, 1.3, 1.3, 16, 1.3, 400, 2.4, 900, 10,
        15, 65),
       (11, 0.9, 25, 1000, 700, 420, 10, 3500, 1400, 11, 0.9, 150, 55, 2.3, 90, 1.3, 1.3, 16, 1.7, 400, 2.4, 900, 10,
        15, 65),
       (12, 0.9, 20, 1200, 700, 420, 10, 3500, 1300, 11, 0.9, 150, 55, 2.3, 90, 1.3, 1.3, 16, 1.7, 400, 2.4, 900, 10,
        15, 65),
       (13, 0.9, 20, 1200, 700, 420, 10, 3500, 1200, 11, 0.9, 150, 55, 2.3, 90, 1.3, 1.3, 16, 1.7, 400, 2.4, 900, 10,
        15, 65),
       (14, 1.52, 0, 200, 150, 30, 0.3, 400, 120, 2, 0.2, 110, 15, 0.003, 20, 0.2, 0.3, 2, 0.1, 65, 0.4, 350, 4, 10, 5),
       (15, 1.6, 10, 260, 300, 70, 11, 750, 370, 3, 0.3, 130, 20, 0.6, 20, 0.3, 0.4, 5, 0.4, 80, 0.5, 350, 5, 10, 8.5),
       (16, 1.17, 10, 700, 460, 80, 7, 800, 750, 3, 0.3, 90, 20, 1.2, 40, 0.5, 0.5, 6, 0.5, 150, 0.9, 400, 6, 15, 15),
       (17, 1.1, 14, 1000, 500, 130, 10, 1100, 1000, 5, 0.4, 90, 30, 1.5, 50, 0.6, 0.6, 8, 0.6, 200, 1.2, 450, 6, 15,
        20),
       (18, 1.1, 16, 1000, 600, 130, 10, 1800, 1200, 5, 0.7, 100, 30, 1.5, 50, 0.9, 0.9, 12, 1, 300, 1.8, 500, 7, 15,
        25),
       (19, 1.1, 19, 1300, 1250, 240, 15, 2400, 1300, 8, 0.9, 120, 40, 1.6, 50, 1, 1, 12, 1.2, 300, 1.8, 600, 8, 15,
        40),
       (20, 1.1, 19, 1300, 1250, 360, 15, 3000, 1500, 9, 0.9, 150, 55, 1.6, 65, 1.1, 1.1, 14, 1.2, 400, 2.4, 700, 8, 15,
        50),
       (21, 0.95, 21, 1300, 1250, 360, 15, 3500, 1500, 9, 0.9, 150, 55, 1.6, 65, 1.1, 1.1, 14, 1.2, 400, 2.4, 700, 8,
        15, 55),
       (22, 0.9, 25, 1000, 700, 310, 18, 3500, 1500, 8, 0.9, 150, 55, 1.8, 75, 1.1, 1.1, 14, 1.3, 400, 2.4, 700, 8, 15,
        55),
       (23, 0.9, 25, 1000, 700, 320, 18, 3500, 1500, 8, 0.9, 150, 55, 1.8, 75, 1.1, 1.1, 14, 1.3, 400, 2.4, 700, 8, 15,
        55),
       (24, 0.9, 25, 1200, 700, 320, 10, 3500, 1400, 8, 0.9, 150, 55, 1.8, 75, 1.1, 1.1, 14, 1.5, 400, 2.4, 700, 8, 15,
        55),
       (25, 0.9, 20, 1200, 700, 320, 10, 3500, 1300, 8, 0.9, 150, 55, 1.8, 75, 1.1, 1.1, 14, 1.5, 400, 2.4, 700, 8, 15,
        55),
       (26, 0.9, 20, 1200, 700, 320, 10, 3500, 1200, 8, 0.9, 150, 55, 1.8, 75, 1.1, 1.1, 14, 1.5, 400, 2.4, 700, 8, 15,
        55),
       (27, 1.2, 25, 1300, 1250, 400, 27, 3500, 1500, 12, 1, 220, 60, 2, 80, 1.4, 1.4, 18, 1.9, 600, 2.6, 750, 10, 15,
        55),
       (28, 1.2, 25, 1000, 700, 360, 27, 3500, 1500, 11, 1, 220, 60, 2, 85, 1.4, 1.4, 18, 1.9, 600, 2.6, 770, 10, 15,
        55),
       (29, 1.45, 25, 1300, 1250, 360, 10, 4000, 1500, 13, 1.3, 290, 70, 2.6, 115, 1.5, 1.6, 17, 2, 500, 2.8, 1200, 11,
        15, 55),
       (30, 1.45, 25, 1000, 700, 320, 10, 4000, 1500, 12, 1.3, 290, 70, 2.6, 120, 1.5, 1.6, 17, 2, 500, 2.8, 1300, 11,
        15, 55),
       (31, 1.45, 25, 1300, 1250, 400, 27, 4000, 1500, 13, 1.3, 290, 70, 2.6, 115, 1.5, 1.6, 18, 2, 600, 2.8, 1200, 11,
        15, 55),
       (32, 1.45, 25, 1000, 700, 360, 27, 4000, 1500, 12, 1.3, 290, 70, 2.6, 120, 1.5, 1.6, 18, 2, 600, 2.8, 1300, 11,
        15, 55);